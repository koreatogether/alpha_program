# v6.08 기능 검증 테스트 체크리스트

이 문서는 v6.08 펌웨어의 주요 수정사항들을 검증하고, v6.07에서 확인된 문제들이 해결되었는지 중점적으로 테스트하기 위한 절차를 정의합니다.

## 1. 사전 준비
1. 최신 펌웨어(`01_ds18b20_flow_06.ino` v6.08)를 Arduino UNO R4 WiFi 보드에 업로드합니다.
2. Arduino IDE의 시리얼 모니터를 열고 보드레이트를 `9600`으로 설정합니다.

## 2. 테스트 시나리오

### 시나리오 1: 개별 ID 변경 기능 회귀 테스트
- [ ] **(1-1) 센서 선택 시 현재 ID 정확성 확인:**
    - `menu` 입력 후 `1`을 선택하여 '개별 센서 ID 변경'으로 진입합니다.
    - 테이블에 표시된 ID가 할당된 센서의 번호를 입력합니다.
    - **기대 결과:** "You selected sensor No. [선택한 번호] (Current ID: [실제 할당된 ID])." 메시지가 출력되어야 합니다. `Current ID`가 실제 할당된 ID로 정확히 표시되어야 합니다.
- [ ] **(1-2) ID 값 변경 성공 여부 확인:**
    - `1-1`에서 센서를 성공적으로 선택한 후, 사용 가능한 새로운 ID를 입력합니다.
    - **기대 결과:** ID가 성공적으로 변경되고, 업데이트된 센서 테이블에 변경된 ID가 반영되어야 합니다.

### 시나리오 2: 선택적 ID 변경 기능 핵심 수정사항 검증 ⭐
- [ ] **(2-1) 개선된 입력 파싱 테스트 (핵심):**
    - `menu` 입력 후 `2`를 선택하여 '선택적 ID 변경'으로 진입합니다.
    - 센서 선택 프롬프트에서 다음 형식으로 입력하고 엔터를 누릅니다.
        - `78` (연속 숫자 - 7번과 8번 센서 선택)
        - `123` (연속 숫자 - 1번, 2번, 3번 센서 선택)
        - `1 2 3` (공백 구분)
        - `1,2,3` (쉼표 구분)
        - `12 3 4` (공백 구분, 두 자리 숫자 포함)
    - **기대 결과:** 각 입력 후, 시스템이 인식한 센서 번호 목록이 정확하게 표시되어야 합니다. 특히 **`78` 입력 시 `Selected sensors: 7, 8`로 표시**되어야 합니다.
- [ ] **(2-2) 메뉴 취소 후 즉시 테이블 출력 확인 (핵심):**
    - `menu` 입력 후 `2`를 선택하여 '선택적 ID 변경'으로 진입합니다.
    - 센서 선택 프롬프트에서 `0`을 입력하여 취소합니다.
    - **기대 결과:** 취소 메시지 출력 후 **즉시(3초 이내)** 센서 테이블이 출력되어야 합니다. 지연이 발생하지 않아야 합니다.
- [ ] **(2-3) 변경된 ID의 재변경 가능 여부 확인:**
    - 여러 센서의 ID를 성공적으로 변경합니다.
    - 다시 `menu` 입력 후 `2`를 선택하여 변경된 ID를 가진 센서들을 재선택합니다.
    - **기대 결과:** 변경된 ID를 가진 센서가 정상적으로 선택되고, 새로운 ID로 재변경이 성공적으로 이루어져야 합니다.

### 시나리오 3: 메뉴 타임아웃 기능 핵심 수정사항 검증 ⭐
- [ ] **(3-1) 메뉴 타임아웃 정상 동작 확인 (핵심):**
    - `menu` 입력 후 아무 입력 없이 60초 동안 대기합니다.
    - **기대 결과:** 정확히 60초 후 "⏰ Menu timeout. Returning to normal operation." 메시지가 출력되고, 자동으로 메인 모드로 복귀해야 합니다.
- [ ] **(3-2) 타임아웃 후 센서 테이블 즉시 출력:**
    - `3-1`에서 타임아웃 발생 후 센서 테이블이 즉시 출력되는지 확인합니다.
    - **기대 결과:** 타임아웃 메시지 출력 후 즉시 센서 테이블이 표시되어야 합니다.
- [ ] **(3-3) 메뉴 진입 및 반복 테스트:**
    - `menu` 또는 `m` 입력 후 `5`를 눌러 취소하는 과정을 5회 이상 반복합니다.
    - **기대 결과:** 매번 정상적으로 메뉴가 표시되고 취소되어야 하며, 지연이나 먹통 현상이 발생하지 않아야 합니다.

### 시나리오 4: 기타 기능 회귀 테스트
- [ ] **(4-1) 주소 기준 ID 자동 부여:** 메뉴 `3`번 기능이 이전과 동일하게 정상 작동하는지 확인합니다.
- [ ] **(4-2) 전체 ID 초기화:** 메뉴 `4`번 기능이 이전과 동일하게 정상 작동하는지 확인합니다.
- [ ] **(4-3) ID 초기화 후 메뉴 진입 시 안내 메시지:**
    - 메뉴 `4`번으로 모든 센서 ID를 초기화합니다.
    - `menu` 입력 후 `1`번 또는 `2`번 메뉴에 진입을 시도합니다.
    - **기대 결과:** "No sensors with valid IDs found. Please assign IDs first using menu option 3 or 4." 메시지가 출력되고 자동으로 메인 모드로 복귀해야 합니다.

### 시나리오 5: 예외 상황 및 안정성 테스트
- [ ] **(5-1) 센서가 없을 때 에러 처리:**
    - 센서 연결을 모두 해제한 상태에서 펌웨어를 시작합니다.
    - **기대 결과:** "No DS18B20 sensors found. Please check connections." 메시지가 출력되고 무한 루프에 진입해야 합니다.
- [ ] **(5-2) ID 중복 입력 시 에러 메시지:**
    - 개별 ID 변경에서 이미 사용 중인 ID를 입력합니다.
    - **기대 결과:** "ID [번호] is already in use. Please choose another ID." 메시지가 출력되고 재입력을 요구해야 합니다.
- [ ] **(5-3) 시리얼 명령어 정상 동작:**
    - `menu`, `m`, `help`, `h` 명령어가 정상적으로 동작하는지 확인합니다.
    - **기대 결과:** 각 명령어에 대해 적절한 응답이 출력되어야 합니다.

---

## 3. v6.08 핵심 수정사항 중점 검증

### ⭐ **최우선 검증 항목**
- **메뉴 타임아웃 이중 체크 시스템:** `processMenuInput()`과 `displayIdChangeMenu()` 양쪽에서 타임아웃 체크가 정상 동작하는지 확인
- **즉시 테이블 출력:** 메뉴 취소 시 `previousMillis = 0` 설정으로 지연 없이 테이블이 출력되는지 확인
- **지능형 입력 파싱:** 공백 유무에 따라 자동으로 파싱 방식이 선택되는지 확인

### � **성능 개선 검증**
- 메뉴 취소 후 테이블 출력까지 시간이 3초 이내인지 측정
- 연속 숫자 입력(`78`, `123`)이 개별 숫자로 정확히 인식되는지 확인
- 타임아웃 발생 후 즉시 메뉴 재진입이 가능한지 확인

---

## 4. 테스트 결과 기록

### 성공한 항목
(테스트 진행하면서 [v] 표시와 함께 기록)

### 실패한 항목  
(문제 발견 시 [x] 표시와 함께 상세 내용 기록)

### 특이사항
(개선이 필요하거나 주의해야 할 사항 기록)

---

**작성일:** 2025-07-24  
**기준 버전:** v6.08  
**주요 수정사항:** 메뉴 타임아웃 안정화, 즉시 반응성 개선, 지능형 입력 파싱
